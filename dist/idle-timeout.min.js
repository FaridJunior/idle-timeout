/*! IdleTimeout v0.1.0 | https://github.com/jackmu95/idle-timeout/ | (c) 2016 Jacob MÃ¼ller */
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),IdleTimeout=function(){function t(e){var i=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,t),this._timeoutFunction=null,this._idle=!1,this._boundHandleEvent=function(t){return i._handleEvent(t)},this._eventNames=["DOMMouseScroll","mousedown","mousemove","mousewheel","MSPointerDown","MSPointerMove","keydown","touchmove","touchstart","wheel"],this._startTime=null,this._remainingTime=null,this._lastPageX=-1,this._lastPageY=-1,this._callback=e,this._options=_extends({element:document,timeout:3e5,loop:!1},n),this._init()}return _createClass(t,[{key:"_init",value:function(){var t=this;this._eventNames.forEach(function(e){t._options.element.addEventListener(e,t._boundHandleEvent)}),this._reset()}},{key:"_reset",value:function(){var t=this;this._timeoutFunction&&(clearTimeout(this._timeoutFunction),this._timeoutFunction=null),this._idle&&!this._options.loop||(this._timeoutFunction=setTimeout(function(){t._handleTimeout()},this._remainingTime||this._options.timeout),this._startTime=(new Date).getTime())}},{key:"_handleEvent",value:function(t){if(this._remainingTime)return!1;if("mousemove"===t.type){if("undefined"==typeof t.pageX&&"undefined"==typeof t.pageY||t.pageX===this._lastPageX&&t.pageY===this._lastPageY)return;this._lastPageX=t.pageX,this._lastPageY=t.pageY}this._reset()}},{key:"_handleTimeout",value:function(){this._idle=!0,this._reset(),this._callback()}},{key:"pause",value:function(){var t=this._startTime+this._options.timeout-(new Date).getTime();t<=0||(this._remainingTime=t,this._timeoutFunction&&(clearTimeout(this._timeoutFunction),this._timeoutFunction=null))}},{key:"resume",value:function(){this._remainingTime&&(this._reset(),this._remainingTime=null)}},{key:"reset",value:function(){this._idle=!1,this._remainingTime=null,this._reset()}},{key:"destroy",value:function(){var t=this;this._eventNames.forEach(function(e){t._options.element.removeEventListener(e,t._boundHandleEvent)}),this._timeoutFunction&&clearTimeout(this._timeoutFunction),this._timeoutFunction=null,this._idle=null,this._boundHandleEvent=null,this._eventNames=null,this._startTime=null,this._remainingTime=null,this._lastPageX=null,this._lastPageY=null,this._callback=null,this._options=null}},{key:"idle",get:function(){return this._idle},set:function(t){t?this._handleTimeout():this.reset()}},{key:"timeout",set:function(t){this._options.timeout=t}},{key:"loop",set:function(t){this._options.loop=t}}]),t}();window.IdleTimeout=IdleTimeout;